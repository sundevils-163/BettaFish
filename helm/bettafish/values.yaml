bettafish:
  image:
    repository: junzhutx/bettafish
    tag: latest
    pullPolicy: IfNotPresent

  replicaCount: 1

  service:
    type: ClusterIP
    ports:
      api: 5000
      insight: 8501
      media: 8502
      query: 8503

  env:
    PYTHONUNBUFFERED: "1"
    STREAMLIT_SERVER_ENABLE_FILE_WATCHER: "false"
    DB_HOST: bettafish-postgres
    DB_PORT: 5432
    DB_DIALECT: postgresql
    DB_NAME: bettafish
    # Insight Agent LLM接口BaseUrl，可自定义厂商API
    INSIGHT_ENGINE_BASE_URL: https://api.openai.com/v1/chat/completions
    INSIGHT_ENGINE_MODEL_NAME: gpt-3.5-turbo
    # Media Agent LLM接口BaseUrl
    MEDIA_ENGINE_BASE_URL: https://api.openai.com/v1/chat/completions
    MEDIA_ENGINE_MODEL_NAME: gpt-3.5-turbo
    # MindSpider LLM接口BaseUrl
    MINDSPIDER_BASE_URL: https://api.openai.com/v1/chat/completions
    MINDSPIDER_MODEL_NAME: gpt-3.5-turbo
    # Query Agent LLM接口BaseUrl
    QUERY_ENGINE_BASE_URL: https://api.openai.com/v1/chat/completions
    QUERY_ENGINE_MODEL_NAME: gpt-3.5-turbo
    # Report Agent LLM接口BaseUrl
    REPORT_ENGINE_BASE_URL: https://api.openai.com/v1/chat/completions
    REPORT_ENGINE_MODEL_NAME: gpt-3.5-turbo
    # Forum Host LLM BaseUrl
    FORUM_HOST_BASE_URL: https://api.openai.com/v1/chat/completions
    FORUM_HOST_MODEL_NAME: gpt-3.5-turbo
    # SQL Keyword Optimizer BaseUrl
    KEYWORD_OPTIMIZER_BASE_URL: https://api.openai.com/v1/chat/completions
    KEYWORD_OPTIMIZER_MODEL_NAME: gpt-3.5-turbo

  envFromSecret:
    - name: "bettafish-secrets"
    - name: "bettafish-postgres-auth"

  readinessProbe:
    path: /
    port: api
    initialDelaySeconds: 20
    periodSeconds: 10

  persistence:
    enabled: true
    size: 5Gi
    volumes:
      - name: logs
        mountPath: /app/logs
        size: 1Gi
      - name: final-reports
        mountPath: /app/final_reports
        size: 1Gi
      - name: insight-reports
        mountPath: /app/insight_engine_streamlit_reports
        size: 1Gi
      - name: media-reports
        mountPath: /app/media_engine_streamlit_reports
        size: 1Gi
      - name: query-reports
        mountPath: /app/query_engine_streamlit_reports
        size: 1Gi
    storageClassName: ""

postgres:
  enabled: true
  image:
    repository: postgres
    tag: "15"
    pullPolicy: IfNotPresent

  auth:
    username: bettafish
    password: bettafish
    database: bettafish

  persistence:
    enabled: true
    size: 10Gi
    storageClassName: ""

  service:
    port: 5432

  resources: {}
  nodeSelector: {}
  tolerations: []
  affinity: {}

global:
  nameOverride: ""
  fullnameOverride: ""

ingress:
  enabled: true
  hostname: bettafish.lan
  ingressClassName: nginx
